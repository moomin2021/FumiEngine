#include "Stage.h"

Stage::Stage() :
	wallM_(nullptr)
{}

Stage::~Stage() {
	delete wallM_;
	//wallsObj_.clear();
}

void Stage::Initialize() {
	wallM_ = Model::CreateModel("wall");// -> ï«

	int area[27][27] = {
	{1,2,1,2,1,2,1,2,1,2,1,2,1,0,1,2,1,2,1,2,1,2,1,2,1,2,1},
	{2,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,2},
	{1,0,0,0,1,2,1,2,1,2,1,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1},
	{2,0,0,0,2,0,0,0,0,0,0,0,2,0,2,0,2,0,0,0,0,0,0,0,2,0,2},
	{1,0,1,2,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1},
	{2,0,2,0,0,0,0,0,0,0,0,0,2,0,2,0,2,0,0,0,0,0,0,0,2,0,2},
	{1,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,1,2,1,2,1,2,1,2,1,0,1},
	{2,0,2,0,0,0,0,0,0,0,0,0,2,0,2,0,2,0,0,0,0,0,0,0,2,0,2},
	{1,0,1,2,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1},
	{2,0,0,0,2,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,2,0,2},
	{1,0,0,0,1,2,1,2,1,2,1,2,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1},
	{2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,2},
	{1,2,1,2,1,2,1,2,1,2,1,0,0,0,1,0,1,2,1,2,1,2,1,2,1,2,1},
	{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	{1,2,1,2,1,2,1,2,1,2,1,0,1,0,1,2,1,2,1,2,1,0,1,2,1,2,1},
	{2,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,2,0,2,0,0,0,2},
	{1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,1},
	{2,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,2,0,2,0,0,0,2},
	{1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,1},
	{2,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,2,0,2,0,0,0,2},
	{1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,1},
	{2,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,2,0,2,0,0,0,2},
	{1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,1},
	{2,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,2,0,2,0,0,0,2},
	{1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,2,1,0,1},
	{2,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,2},
	{1,2,1,2,1,2,1,2,1,2,1,2,1,0,1,2,1,2,1,2,1,2,1,2,1,2,1}};

	// ÉRÉsÅ[
	for (size_t i = 0; i < 27; i++) {
		for (size_t j = 0; j < 27; j++) {
			area_[i][j] = area[i][j];
		}
	}

	for (size_t i = 0; i < 27; i++) {
		for (size_t j = 0; j < 27; j++) {
			if (area_[i][j] == 2) {
				Object3D* wall = Object3D::CreateObject3D();
				wall->SetModel(wallM_);
				wall->SetCamera(camera_);
				wall->scale_ = { 10.0f, 10.0f, 10.0f };
				wall->position_ = { j * 5.0f, 5.0f, i * -5.0f};
				if (i % 2 == 0) wall->rotation_.y = 90.0f;
				wallsObj_.emplace_back(*wall);
				delete wall;
			}
		}
	}
}

void Stage::Draw() {
	for (size_t i = 0; i < wallsObj_.size(); i++) {
		wallsObj_[i].Draw();
	}
}